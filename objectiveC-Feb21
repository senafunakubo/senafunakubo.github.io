//
//  main.m
//  LinkedIn
//
//  Created by Sena Funakubo on 2017-02-21.
//  Copyright Â© 2017 Sena Funakubo. All rights reserved.
//

#import <Cocoa/Cocoa.h>
#import "Account.h"
#import "Profile.h"
#import "FeedsManager.h"

int main(int argc, const char * argv[]) {

 //create an account object

    //Step1: Creating an account object
    Account* MyAccount = [[Account alloc] initWithUsername: @"Sena" password:@"178mono"];

    [MyAccount setUsername:@"inabacker24"];


    //step2: Checking whether the account is valid or not
    BOOL isValid = [MyAccount isAccountValid];

    if(isValid==true)
    {
        NSLog(@"\n The account is valid. \n");
    }
    else
    {
        NSLog(@"\n The account is Not valid.\n");
    }

 //create a profile object
    //Step1:
    Profile* myProfile = [[Profile alloc] initWithFirstname:@"Sena" lastname:@"Funa" address:@"South Vancouver" age:25 phoneNumber:@"178178" profilePicURL:@"178@gmail.com"];

    [myProfile printProfile];

 //Ask LinkedIn to show us 10 most resent posts

    FeedsManager* feedManager = [[FeedsManager alloc] init];
    NSArray<Post*>* listOfPost = [feedManager loadsFeedsForAccount:MyAccount amount:10];

    for (int i=0; i<listOfPost.count; i++)
    {
        Post* post = [listOfPost objectAtIndex:i];

        //showing the post
        [post show];

        //reporting the post
        [post reportThePost];

        //adding
        User* user = [[User alloc] init];
        NSDate* date = [NSDate date];
        Like* like = [[Like alloc] initWithLikeID:1 likeOwner:user date:date];
        [post addLike:like];

        //adding a comment to the post
        NSMutableArray<attachment*>* attachments = [[NSMutableArray<attachment*> alloc] init];
        attachment* att1 = [[attachment alloc] initWithAttachmentID:1 type:1 dataURL:@"https://www.google.com"];
        [attachments addObject:att1];

        attachment* att2 = [[attachment alloc] initWithAttachmentID:2 type:3 dataURL:@"httpas://www.internet.org"];
        [attachments addObject:att2];

        PostComments* comment = [[PostComments alloc] initWithCommentID:1 commentAuthor:user date:date attachments:attachments];
        [post addComments:comment];


    }

    return NSApplicationMain(argc, argv);
}
